<?
/**
 * Grid Template View
 *
 * @package    Molajo
 * @license    http://www.opensource.org/licenses/mit-license.html MIT License
 * @copyright  2014 Amy Stephen. All rights reserved.
 */
?>
<tr class="<? echo $this->row->grid_row_class; ?>"><?
    $columnCount = 1;
    $nowrap = ' nowrap';
    $first = 1;
    $columnArray = $this->runtime_data->plugin_data->grid_columns;

    foreach ($columnArray as $column) {
        $class  = '';
        $nowrap = '';
        if ($column == 'ordering') {
            $nowrap = ' nowrap';
        } elseif ($column == 'featured' || $column == 'stickied' || $column == 'status') {
            $class = ' class="center"';
        }
        ?>

        <td<? echo $class ?><? echo $nowrap; ?>><?
        if ($column == 'title') {
            echo '<a href="">';
            //echo '<a href="' . $this->row->catalog_id_url . '">';
            echo $this->row->$column;
            echo '</a>';

        } elseif ($column == 'username') {
            //    echo '<a href="' . $this->row->catalog_id_url . '">';
            echo '<a href="">';
            echo $this->row->$column;
            echo '</a>';

        } elseif ($column == 'status' || $column == 'status_name') {
            if ((int)$this->row->status == 2) {
                $class = 'success radius label';
            } elseif ((int)$this->row->status == 1) {
                $class = 'success radius label';
            } elseif ((int)$this->row->status == 0) {
                $class = 'radius label';
            } elseif ((int)$this->row->status == - 1) {
                $class = 'alert radius label';
            } elseif ((int)$this->row->status == - 2) {
                $class = 'alert radius label';
            } elseif ((int)$this->row->status == - 5) {
                $class = 'radius label';
            } elseif ((int)$this->row->status == - 10) {
                $class = 'secondary radius label';
            }

            echo '<span class="' . $class . '">' . $this->language_controller->translate(
                    $this->row->status_name
                ) . '</span>';

        } elseif ($column == 'stickied') {
            echo '<span class="stickied centered">';
            if ((int)$this->row->$column == 1) {
                echo '<i class="fi-check" alt="' . $this->language_controller->translate('Stickied') . '"></i>';
            } else {
                echo '';
            }
            echo '</span>';

        } elseif ($column == 'featured') {
            echo '<span class="featured centered">';
            if ((int)$this->row->$column == 1) {
                echo '<i class="fi-star" alt="' . $this->language_controller->translate('Featured') . '"></i>';
            } else {
                echo '';
            }
            echo '</span>';

        } elseif ($column == 'ordering') {
            if ((int)$this->row->last_row == 1) {
                echo ' ';
            } else {
                echo '<i class="fi-arrow-down"></i>&nbsp;';
            }
            if ((int)$this->row->first_row == 1) {
                echo ' ';
            } else {
                echo '<i class="fi-arrow-up"></i>&nbsp;';
            }
            echo '</span>';
            echo '<span class="ordering">';
            echo $this->row->$column;
            echo '</span>';

        } else {
            if (isset($this->row->$column)) {
                echo $this->row->$column;
            } else {
                if (substr($column, 0, strlen('metadata_')) == 'metadata_') {
                    $column = substr($column, strlen('metadata_'), 9999);
                    echo $this->row->metadata->$column;
                } else {
                    echo '<br />Column does not exist: ' . $column;
                }
            }
        }
        ?>
        </td><?

        if ($first == 1) {
            $first  = 0;
            $nowrap = '';
        }

        $columnCount ++;
    }
    ?>
    <td class="center last">
        <input type=checkbox value="<? echo $checked; ?>">
    </td>
</tr>

